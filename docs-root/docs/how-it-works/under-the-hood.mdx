# Under the hood

Here is the part that you have been waiting for so eagerly. We are finally going to uncover the magic! Under the hood, Dassana has two primary components:

-   engine
-   content

![Engine & Content](/img/how-it-works/engine-content.png)

## Engine

The engine takes an alert JSON object from the inbound queue and runs it against the content. Think of the engine as an orchestrator taking input, running the input against the content, and finally returning output.

## Content

The content is what is responsible for doing the "magic." There are two different constructs within content:

-   workflows
-   actions

The engine runs workflows.
![Workflows](/img/how-it-works/workflows.png)

The workflows run actions.
![Content](/img/how-it-works/content.png)

### Workflows

Workflows are configurable processes written using YAML. There are three types of workflows.

-   normalize
-   resource priority
-   contextualize

The engine runs the normalize, resource priority, and contextualize workflows (in that order). Every workflow can have steps that call [actions](#actions).

#### Normalize workflow

This workflow type is responsible for normalizing alerts from security vendors. These workflows take an alert from a specific vendor and extract standard fields like account id, region id, service, etc.

:::info

The complete list of required fields can be found [here](/docs/guides/workflow-authoring/normalize#normalized-output).

:::

:::note

If Dassana does not support the security vendor you use, you can add support by following the steps highlighted [here](/docs/guides/workflow-authoring/contextualize).

:::

#### Resource priority workflow

This workflow type is responsible for adding the severity of a resource. Say, for example, you have two public buckets. Most security systems would create two alerts, both of which are marked critical. However, what if one of the buckets is in dev and the other is in prod? Resource priority workflows allow you to write tag-based rules to demarcate resources and give them the appropriate resource risk. So, for example, you may say that all dev resources are low, whereas prod resources are critical.

:::note

To configure your tagging logic for appropriate resource-based risk, see this [guide](/docs/guides/workflow-authoring/resource-priority).

:::

#### Contextualize workflow

Think of contextualize workflows as security policies. These workflows are responsible for adding context to alerts. Say, for example, you have a public bucket. Most security systems would say you have a critical alert in your hands. However, what if you left the bucket public on purpose because you have a static website associated with it? With this workflow type, you can define rules based on the context added to adjust the contextual risk of an alert (not to be confused with resource risk covered in the previous section).

Actions take care of adding context to an alert. Checking to see if a static website is associated with a bucket is handled via an action.

:::info

To view a complete list of security policies supported by Dassana, go [here](https://policyhub.dassana.io/details/policies).

:::

:::note

Cannot find your security policy in the list above? Learn how to write your security policy [here](/docs/guides/workflow-authoring/contextualize).

:::

### Actions

import Actions from '../common-fields/actions/about.md'

<Actions />

:::info

To view a complete list of actions supported by Dassana, go [here](https://policyhub.dassana.io/details/context).

:::

:::note

Interested in learning how to add your own context? Check out this [guide](/docs/guides/workflow-authoring/action).

:::
